{% extends "base.html" %}
{% block title %}All Manga{% endblock %}
{% block content %}

<h2>📚 Manga List</h2>

<!-- Search Form -->
<form method="GET" action="{{ url_for('main.index') }}">
    <input type="text" name="q" value="{{ query }}" placeholder="Search Manga or Author....." size="40">
    <button type="submit">🔍 Search</button>
</form>

<hr>

<!--Manga Grid -->
<div class="manga-grid">
    {% for m in mangas %}
    <div class="manga-card">
        <a href="{{ url_for('main.manga_detail', manga_id=m.id) }}">
            {% if m.cover_image %}
            <img src="{{ url_for('static', filename=m.cover_image) }}" alt="{{ m.title }}" loading="lazy">
            {% else %}
            <img src="{{ url_for('static', filename=default_cover) }}" alt="{{ m.title }}" loading="lazy">
            {% endif %}
            <h4>{{ m.title }}</h4>
        </a>
    </div>
    {% else %}
    <p>No manga added :(.</p>
    {% endfor %}
</div>

<hr>

<!-- Pagination -->
<div class="pagination">
    {% if pagination.has_prev %}
    <a href="{{ url_for('main.index', page=pagination.prev_num, q=query) }}">⬅ Prev</a>
    {% endif %}

    <span>Page {{ pagination.page }} of {{pagination.pages}}</span>

    {% if pagination.has_next %}
    <a href="{{ url_for('main.index', page=pagination.next_num, q=query) }}">Next ➡</a>
    {% endif %}
</div>

{% endblock %}