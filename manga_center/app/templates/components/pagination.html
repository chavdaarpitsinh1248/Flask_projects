{% if pagination.pages > 1 %}
<div class="pagination" style="text-align:center; margin-top:20px;">

    {% set args = request.args.to_dict() %}
    {% if request.view_args %}
    {% for k, v in request.view_args.items() %}
    {% set _ = args.update({k: v}) %}
    {% endfor %}
    {% endif %}
    {% if 'page' in args %}
    {% set _ = args.pop('page') %}
    {% endif %}

    {% if pagination.has_prev %}
    <a href="{{ url_for(request.endpoint, page=pagination.prev_num, **args) }}">&laquo; Prev</a>
    {% endif %}

    {% for p in pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
    {% if p %}
    {% if p == pagination.page %}
    <strong>[{{ p }}]</strong>
    {% else %}
    <a href="{{ url_for(request.endpoint, page=p, **args) }}">{{ p }}</a>
    {% endif %}
    {% else %}
    ...
    {% endif %}
    {% endfor %}

    {% if pagination.has_next %}
    <a href="{{ url_for(request.endpoint, page=pagination.next_num, **args) }}">Next &raquo;</a>
    {% endif %}

</div>
{% endif %}