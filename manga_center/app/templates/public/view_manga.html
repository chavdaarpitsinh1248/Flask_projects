{% extends "base.html" %}
{% block title %}{{ manga.title }}{% endblock %}

{% block content %}
<section class="view-manga">
    <h2>{{ manga.title }}</h2>

    <img src="{{ manga.cover_url }}" alt="{{ manga.title }}"
        style="max-width: 200px; border-radius: 10px; margin-bottom: 10px;">

    {% if current_user.is_authenticated %}
    <form method="post" action="{{ url_for('users.toggle_bookmark', manga_id=manga.id) }}">
        {% if is_bookmarked %}
        <button type="submit" class="btn btn-warning">Remove Bookmark</button>
        {% else %}
        <button type="submit" class="btn btn-outline-warning">Add to Bookmarks</button>
        {% endif %}
    </form>
    {% endif %}

    <!-- Author Info -->
    <p>
        <strong>Author:</strong>
        <a href="{{ url_for('public.view_author', author_id=manga.author.id) }}">
            {{ manga.author.user.username }}
            {% if manga.author.pen_name %}
            ({{ manga.author.pen_name }})
            {% endif %}
        </a>
    </p>

    <p>{{ manga.description }}</p>

    <h3>Chapters</h3>
    {% if chapters %}
    <ul>
        {% for chapter in chapters %}
        <li>
            <a href="{{ url_for('public.read_chapter', chapter_id=chapter.id) }}">
                Chapter {{ chapter.number }}: {{ chapter.title }}
            </a>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No chapters available yet.</p>
    {% endif %}
</section>
{% endblock %}