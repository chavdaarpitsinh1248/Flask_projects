{% extends "profile/profile_base.html" %}
{% block profile_content %}

<h2>Reading History</h2>

{% if history_entries %}
<form method="post" action="{{ url_for('profile.clear_history') }}">
    <button type="submit" style="background: red; color: white;">Clear History</button>
</form>
<ul style="list-style: none; padding: 0;">
    {% for h in history_entries %}
    <li style="margin-bottom: 15px; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
        <!-- Manga cover thumbnail -->
        {% if h.manga.cover_image %}
        <img src="{{ url_for('static', filename='manga_covers/') + h.manga.cover_image }}" width="50"
            style="vertical-align: middle; margin-right: 10px;">
        {% endif %}

        <strong>{{ h.manga.title }}</strong> -
        <a href="{{ url_for('manga.read_chapter', manga_id=h.manga.id, chapter_id=h.chapter.id) }}">
            Chapter {{ h.chapter.number }}: {{ h.chapter.title or '' }}
        </a>

        <br>
        <small style="color: gray;">
            Last viewed: {{ h.last_viewed.strftime('%Y-%m-%d %H:%M') }}
        </small>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No reading history yet.</p>
{% endif %}

{% endblock %}