{% extends "base.html" %}
{% block content %}

<!-- Post Content -->
<div class="card mb-4 shadow-sm">
  <div class="card-body">
    <h3 class="card-title">{{ post.title }}</h3>
    <p class="card-text">{{ post.content }}</p>
    <p class="text-muted small">
      By <a href="{{ url_for('main.user_profile', user_id=post.author.id) }}">{{ post.author.username }}</a>
      · {{ moment(post.created_at).format("YYYY-MM-DD HH:mm") }}
      {% if post.updated_at and post.updated_at != post.created_at %}
      · <i class="bi bi-pencil"></i> Updated {{ moment(post.updated_at).format("YYYY-MM-DD HH:mm") }}
      {% endif %}
    </p>
  </div>
</div>

<!-- Like Button -->
<div class="mb-3">
  <button id="like-btn" data-post-id="{{ post.id }}"
    class="btn btn-sm {% if current_user.id in [l.user_id for l in post.likes] %}btn-success{% else %}btn-outline-success{% endif %}">
    <i class="bi bi-hand-thumbs-up"></i> {{ post.likes.count() }} likes
  </button>
</div>

<!-- Comments Section -->
{% include 'view_post_comments.html' %}

{% endblock %}